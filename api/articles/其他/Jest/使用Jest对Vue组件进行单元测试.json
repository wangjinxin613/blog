{"title":"使用Jest对Vue组件进行单元测试","uid":"23849453bb676c7918a2ae11cb140881","slug":"其他/Jest/使用Jest对Vue组件进行单元测试","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.999Z","comments":true,"path":"api/articles/其他/Jest/使用Jest对Vue组件进行单元测试.json","keywords":null,"cover":[],"content":"<h1 id=\"使用Jest对Vue组件进行单元测试\"><a href=\"#使用Jest对Vue组件进行单元测试\" class=\"headerlink\" title=\"使用Jest对Vue组件进行单元测试\"></a>使用Jest对Vue组件进行单元测试</h1><p>安装依赖</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save-dev @vue/test-utils vue-jest jest-transform-stub jest-serializer-vue</span><br></pre></td></tr></table></figure>\n\n<p>然后在<code>components</code>目录下创建<code>Counter.vue</code>，代码如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;div&gt;&#123;&#123; computedCount &#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">    &lt;button @click=&quot;inc&quot;&gt;加&lt;/button&gt;</span><br><span class=\"line\">    &lt;button @click=&quot;dec&quot;&gt;减&lt;/button&gt;</span><br><span class=\"line\">    &lt;button @click=&quot;reset&quot;&gt;重置&lt;/button&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    factor: &#123; type: Number, default: 1 &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  data() &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      count: 0</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    inc() &#123;</span><br><span class=\"line\">      this.count++;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    dec() &#123;</span><br><span class=\"line\">      this.count--;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    reset() &#123;</span><br><span class=\"line\">      this.count = 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  computed: &#123;</span><br><span class=\"line\">    computedCount: function() &#123;</span><br><span class=\"line\">      return this.count * this.factor;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>在<code>unit</code>目录下创建<code>Counter.spec.js</code>，代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@vue/test-utils&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Counter</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/components/Counter.vue&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">describe</span>(<span class=\"string\">&quot;Counter.vue&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">it</span>(<span class=\"string\">&quot;渲染Counter组件&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> wrapper = <span class=\"title function_\">mount</span>(<span class=\"title class_\">Counter</span>)</span><br><span class=\"line\">        <span class=\"title function_\">expect</span>(wrapper.<span class=\"property\">element</span>).<span class=\"title function_\">toMatchSnapshot</span>()</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">it</span>(<span class=\"string\">&quot;初始化之为0&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> wrapper = <span class=\"title function_\">mount</span>(<span class=\"title class_\">Counter</span>)</span><br><span class=\"line\">        <span class=\"title function_\">expect</span>(wrapper.<span class=\"property\">vm</span>.<span class=\"property\">count</span>).<span class=\"title function_\">toEqual</span>(<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">it</span>(<span class=\"string\">&quot;加1&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> wrapper = <span class=\"title function_\">mount</span>(<span class=\"title class_\">Counter</span>)</span><br><span class=\"line\">        wrapper.<span class=\"property\">vm</span>.<span class=\"title function_\">inc</span>()</span><br><span class=\"line\">        <span class=\"title function_\">expect</span>(wrapper.<span class=\"property\">vm</span>.<span class=\"property\">count</span>).<span class=\"title function_\">toEqual</span>(<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">it</span>(<span class=\"string\">&quot;减1&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> wrapper = <span class=\"title function_\">mount</span>(<span class=\"title class_\">Counter</span>)</span><br><span class=\"line\">        wrapper.<span class=\"property\">vm</span>.<span class=\"title function_\">dec</span>()</span><br><span class=\"line\">        <span class=\"title function_\">expect</span>(wrapper.<span class=\"property\">vm</span>.<span class=\"property\">count</span>).<span class=\"title function_\">toEqual</span>(-<span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">it</span>(<span class=\"string\">&quot;重置&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> wrapper = <span class=\"title function_\">mount</span>(<span class=\"title class_\">Counter</span>)</span><br><span class=\"line\">        wrapper.<span class=\"property\">vm</span>.<span class=\"title function_\">reset</span>()</span><br><span class=\"line\">        <span class=\"title function_\">expect</span>(wrapper.<span class=\"property\">vm</span>.<span class=\"property\">count</span>).<span class=\"title function_\">toEqual</span>(<span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title function_\">it</span>(<span class=\"string\">&quot;因数为10加1操作&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> wrapper = <span class=\"title function_\">mount</span>(<span class=\"title class_\">Counter</span>, &#123; <span class=\"attr\">propsData</span>: &#123; <span class=\"attr\">factor</span>: <span class=\"number\">10</span> &#125; &#125;)</span><br><span class=\"line\">        wrapper.<span class=\"property\">vm</span>.<span class=\"title function_\">inc</span>()</span><br><span class=\"line\">        <span class=\"title function_\">expect</span>(wrapper.<span class=\"property\">vm</span>.<span class=\"property\">computedCount</span>).<span class=\"title function_\">toEqual</span>(<span class=\"number\">10</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p>打开控制台，进入项目根目录，运行<code>yarn test:unit</code>，如图1所示：</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/5402876-7ee2e8edb485c7dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/383/format/webp\" alt=\"img\"></p>\n<p>看代码很容易理解如何在<code>unit test</code>中初始化组件，初始化组件的属性，访问组件的数据，调用组件的方法等等。</p>\n","text":"使用Jest对Vue组件进行单元测试安装依赖 1npm install --save-dev @vue/test-utils vue-jest jest-tra...","permalink":"/post/其他/Jest/使用Jest对Vue组件进行单元测试","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"Jest","slug":"Jest","count":3,"path":"api/tags/Jest.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8Jest%E5%AF%B9Vue%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">使用Jest对Vue组件进行单元测试</span></a></li></ol>","author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Jest辅助函数","uid":"4dc2cf4ec571e0ddd37f9a1c0c0fec2d","slug":"其他/Jest/Jest辅助函数","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.999Z","comments":true,"path":"api/articles/其他/Jest/Jest辅助函数.json","keywords":null,"cover":null,"text":"Setup and Teardown写测试的时候你经常需要在运行测试前做一些准备工作，和在运行测试后进行一些整理工作。 Jest 提供辅助函数来处理这个问题。 ...","permalink":"/post/其他/Jest/Jest辅助函数","photos":[],"count_time":{"symbolsCount":923,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Jest","slug":"Jest","count":3,"path":"api/tags/Jest.json"}],"author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"部署","uid":"9c08a0d97df6bc70228237d5ac86d1b4","slug":"其他/apollo/部署","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.999Z","comments":true,"path":"api/articles/其他/apollo/部署.json","keywords":null,"cover":null,"text":" 数据库 docker部署 Apollo Config Service 获取镜像1docker pull apolloconfig/apollo-configs...","permalink":"/post/其他/apollo/部署","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"apollo","slug":"apollo","count":1,"path":"api/tags/apollo.json"}],"author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}