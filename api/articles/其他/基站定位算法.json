{"title":"基站定位算法","uid":"d177b7da3f653e24c739049a5d098166","slug":"其他/基站定位算法","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.993Z","comments":true,"path":"api/articles/其他/基站定位算法.json","keywords":null,"cover":[],"content":"<h3 id=\"手机基站-蜂窝网络基站：\"><a href=\"#手机基站-蜂窝网络基站：\" class=\"headerlink\" title=\"手机基站 &amp; 蜂窝网络基站：\"></a>手机基站 &amp; 蜂窝网络基站：</h3><p>基站即公用移动通信基站是无线电台站的一种形式，是指在一定的无线电覆盖区中，通过移动通信交换中心，与移动电话终端之间进行信息传递的无线电收发信电台。</p>\n<p>基站定位一般应用于手机用户，手机基站定位服务又叫做移动位置服务（LBS——Location Based Service），它是通过电信移动运营商的网络（如GSM网）获取移动终端用户的位置信息（经纬度坐标），在电子地图平台的支持下，为用户提供相应服务的一种增值业务，例如目前中国移动动感地带提供的动感位置查询服务等。</p>\n<p>1.1  COO（Cell of Origin）定位：COO定位是一种单基站定位，即根据设备当前连接的蜂窝基站的位置来确定设备的位置。</p>\n<p>1.2  AOA定位：AOA(Angle of Arrival到达角度)定位是一种两基站定位方法，基于信号的入射角度进行定位。</p>\n<p>1.3  TOA&#x2F;TDOA定位：TOA(Time of Arrival到达时间)、TDOA(Time Difference of Arrival到达时间差)都是基于电波传播时间的定位方法。也都是三基站定位方法，二者的定位都需要同时有三个位置已知的基站合作才能进行。<br>基站定位的大致原理为：移动电话测量不同基站的下行导频信号，得到不同基站下行导频的TOA（Time of Arrival，到达时刻）或TDOA(Time Difference of Arrival，到达时间差)，根据该测量结果并结合基站的坐标，一般采用三角公式估计算法，就能够计算出移动电话的位置。实际的位置估计算法需要考虑多基站(3个或3个以上)定位的情况，因此算法要复杂很多。一般而言，移动台测量的基站数目越多，测量精度越高，定位性能改善越明显。</p>\n<h3 id=\"什么是MNC-LAC-Cell-ID\"><a href=\"#什么是MNC-LAC-Cell-ID\" class=\"headerlink\" title=\"什么是MNC&#x2F;LAC&#x2F;Cell ID\"></a>什么是MNC&#x2F;LAC&#x2F;Cell ID</h3><ul>\n<li>Mobile Network Code(MNC)<br>移动网号码，中国联通CDMA系统的MNC为03，中国移动的为00。</li>\n<li>Mobile Country Code(MCC)<br>移动用户所属国家代号：460</li>\n<li>Location Area Code(LAC)<br>地区区域码，用来划分区域，一般一个小地方就一个LAC，大地方就</li>\n<li>Cell Tower ID(Cell ID)<br>CellID代表一个移动基站，如果你有基站数据，查CellID你就可以知道这个基站在哪里，移动公司或者警察通过这个知道你是在哪个基站范围打的移动电话。</li>\n</ul>\n<p>　这些信息有什么用呢？ 通过这些信息可以知道你的手机是从哪个国家，区域和哪个基站接入移动网络的。所以有些防盗手机丢失后，会发一些类 似”MCC:460;MNC:01;LAC:7198:CELLID:24989”内容的短信到你指定号码就是这个用途，通过这些信息可以从移动查到你的 被盗手机在哪里出现过。不过知道了也没用，中国人口这么密集，就是在你身边你也不知道谁是小偷：） </p>\n<h1 id=\"Trilateration三边测量定位算法\"><a href=\"#Trilateration三边测量定位算法\" class=\"headerlink\" title=\"Trilateration三边测量定位算法\"></a>Trilateration三边测量定位算法</h1><p>Trilateration（三边测量）是一种常用的定位算法：</p>\n<ol>\n<li>已知三点位置 (x1, y1), (x2, y2), (x3, y3)</li>\n<li>已知未知点 (x0, y0) 到三点距离 d1, d2, d3</li>\n</ol>\n<p>以 d1, d2, d3 为半径作三个圆，根据毕达哥拉斯定理，得出交点即未知点的位置计算公式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">( x1 - x0 )2 + ( y1 - y0 )2 = d12</span><br><span class=\"line\">( x2 - x0 )2 + ( y2 - y0 )2 = d22</span><br><span class=\"line\">( x3 - x0 )2 + ( y3 - y0 )2 = d32</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/..%5Cimg%5Cimage-20200825164145365.png\" alt=\"image-20200825164145365\"></p>\n<p>设未知点位置为 (x, y)， 令其中的第一个球形 P1 的球心坐标为 (0, 0)，P2 处于相同纵坐标，球心坐标为 (d, 0)，P3 球心坐标为 (i, j)，三个球形半径分别为 r1, r2, r3，z为三球形相交点与水平面高度。则有：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r12 = x2 + y2 + z2</span><br><span class=\"line\">r22 = (x - d)2 + y2 + z2</span><br><span class=\"line\">r32 = (x - i)2 + (y - j)2 + z2</span><br></pre></td></tr></table></figure>\n\n<p>当 z &#x3D; 0 时， 即为三个圆在水平面上相交为一点，首先解出 x:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x = (r12 - r22 + d2) / 2d</span><br></pre></td></tr></table></figure>\n\n<p>将公式二变形，将公式一的 z2 代入公式二，再代入公式三得到 y 的计算公式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">y = (r12 - r32 - x2 + (x - i)2 + j2) / 2j</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"javascript算法实现\"><a href=\"#javascript算法实现\" class=\"headerlink\" title=\"javascript算法实现\"></a>javascript算法实现</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">trilateration</span>(<span class=\"params\">x1, y1, d1, x2, y2, d2, x3, y3, d3</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> d = [<span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a11 = <span class=\"number\">2</span> * (x1 - x3);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a12 = <span class=\"number\">2</span> * (y1 - y3);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> b1 = <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(x1, <span class=\"number\">2</span>) - <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(x3, <span class=\"number\">2</span>) + <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(y1, <span class=\"number\">2</span>) - <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(y3, <span class=\"number\">2</span>) + <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(d3, <span class=\"number\">2</span>) - <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(d1, <span class=\"number\">2</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a21 = <span class=\"number\">2</span> * (x2 - x3);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a22 = <span class=\"number\">2</span> * (y2 - y3);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> b2 = <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(x2, <span class=\"number\">2</span>) - <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(x3, <span class=\"number\">2</span>) + <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(y2, <span class=\"number\">2</span>) - <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(y3, <span class=\"number\">2</span>) + <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(d3, <span class=\"number\">2</span>) - <span class=\"title class_\">Math</span>.<span class=\"title function_\">pow</span>(d2, <span class=\"number\">2</span>);</span><br><span class=\"line\">  d[<span class=\"number\">0</span>] = (b1 * a22 - a12 * b2) / (a11 * a22 - a12 * a21);</span><br><span class=\"line\">  d[<span class=\"number\">1</span>] = (a11 * b2 - b1 * a21) / (a11 * a22 - a12 * a21);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> d;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> area = <span class=\"title function_\">trilateration</span>(<span class=\"number\">12641371.971</span>, <span class=\"number\">4138703.5211</span>, <span class=\"number\">6</span>, <span class=\"number\">12641381.9026</span>, <span class=\"number\">4138706.4714</span>, <span class=\"number\">6</span>, <span class=\"number\">12641370.7839</span>, <span class=\"number\">4138708.7705</span>, <span class=\"number\">6</span>);</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(area.<span class=\"title function_\">join</span>(<span class=\"string\">&#x27;,&#x27;</span>));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"D3-js实现\"><a href=\"#D3-js实现\" class=\"headerlink\" title=\"D3.js实现\"></a>D3.js实现</h2><p>定义三个圆的坐标及半径，计算\t出交点的坐标 (obj_x, obj_y).</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var x_0 = 150, y_0 = 150;</span><br><span class=\"line\">var x_1 = x_0, y_1 = y_0, d = 150, x_2 = x_0 + d, x_3 = 225, y_3 = 315, r = 100;</span><br><span class=\"line\">var i = x_3 - x_0, j = y_3 - y_0;</span><br><span class=\"line\">var x = (Math.pow(r, 2) - Math.pow(r, 2) + Math.pow(d, 2)) / (2 * d) + x_0;</span><br><span class=\"line\">var obj_x = x + x_0;</span><br><span class=\"line\">var y = (Math.pow(r, 2) - Math.pow(r, 2) - Math.pow(x, 2) + Math.pow((x - i), 2)</span><br><span class=\"line\">    + Math.pow(j, 2)) / (2 * j);</span><br><span class=\"line\">var obj_y = y + y_0;</span><br></pre></td></tr></table></figure>\n\n<p>绘出圆形及交点：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">svg.append(&quot;circle&quot;).attr(&quot;cx&quot;, x_1)</span><br><span class=\"line\">    .attr(&quot;cy&quot;, y_1).attr(&quot;r&quot;, r)</span><br><span class=\"line\">    .style(&quot;fill&quot;, &quot;blue&quot;).style(&quot;opacity&quot;, 0.3);</span><br><span class=\"line\">svg.append(&quot;circle&quot;).attr(&quot;cx&quot;, x_2)</span><br><span class=\"line\">    .attr(&quot;cy&quot;, y_0).attr(&quot;r&quot;, r)</span><br><span class=\"line\">    .style(&quot;fill&quot;, &quot;red&quot;).style(&quot;opacity&quot;, 0.4);</span><br><span class=\"line\">svg.append(&quot;circle&quot;).attr(&quot;cx&quot;, x_3)</span><br><span class=\"line\">    .attr(&quot;cy&quot;, y_3).style(&quot;opacity&quot;, 0.5)</span><br><span class=\"line\">    .attr(&quot;r&quot;, r).style(&quot;fill&quot;, &quot;yellow&quot;);</span><br><span class=\"line\">svg.append(&quot;circle&quot;).attr(&quot;cx&quot;, obj_x)</span><br><span class=\"line\">    .attr(&quot;cy&quot;, obj_y).attr(&quot;r&quot;, 3)</span><br><span class=\"line\">    .style(&quot;fill&quot;, &quot;red&quot;);</span><br></pre></td></tr></table></figure>\n\n<p>多于用实现定位算法，与之相同的也许还可以采用K-Means或Overlap聚类算法，后两者在地图标注上使用比较广。</p>\n","text":"手机基站 & 蜂窝网络基站：基站即公用移动通信基站是无线电台站的一种形式，是指在一定的无线电覆盖区中，通过移动通信交换中心，与移动电话终端之间进行信息传递的无线...","permalink":"/post/其他/基站定位算法","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"其他","slug":"其他","count":4,"path":"api/tags/其他.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%8B%E6%9C%BA%E5%9F%BA%E7%AB%99-%E8%9C%82%E7%AA%9D%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%AB%99%EF%BC%9A\"><span class=\"toc-text\">手机基站 &amp; 蜂窝网络基站：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFMNC-LAC-Cell-ID\"><span class=\"toc-text\">什么是MNC&#x2F;LAC&#x2F;Cell ID</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Trilateration%E4%B8%89%E8%BE%B9%E6%B5%8B%E9%87%8F%E5%AE%9A%E4%BD%8D%E7%AE%97%E6%B3%95\"><span class=\"toc-text\">Trilateration三边测量定位算法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#javascript%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">javascript算法实现</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#D3-js%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">D3.js实现</span></a>","author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"前端性能监控","uid":"0fe6c6eef6e43a0de60f25d72232eb4f","slug":"其他/前端性能监控","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.993Z","comments":true,"path":"api/articles/其他/前端性能监控.json","keywords":null,"cover":null,"text":"前端性能监控是指在前端项目中收集和分析页面加载、渲染和交互的性能数据，主要包括以下几个方面： 页面加载性能监控：监控页面加载时间、请求数量和大小、页面资源加载情...","permalink":"/post/其他/前端性能监控","photos":[],"count_time":{"symbolsCount":368,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"其他","slug":"其他","count":4,"path":"api/tags/其他.json"}],"author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"apollo谷歌浏览器插件计划","uid":"56b4c3cf9f6d15fdabe8eaa9ff26c1e2","slug":"其他/apollo谷歌浏览器插件计划","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.993Z","comments":true,"path":"api/articles/其他/apollo谷歌浏览器插件计划.json","keywords":null,"cover":null,"text":"功能列表- ","permalink":"/post/其他/apollo谷歌浏览器插件计划","photos":[],"count_time":{"symbolsCount":7,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"其他","slug":"其他","count":4,"path":"api/tags/其他.json"}],"author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}