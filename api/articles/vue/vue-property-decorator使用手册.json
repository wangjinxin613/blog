{"title":"vue-property-decorator使用手册","uid":"aaae541336ce9c9a068b009d52c1b8e0","slug":"vue/vue-property-decorator使用手册","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.993Z","comments":true,"path":"api/articles/vue/vue-property-decorator使用手册.json","keywords":null,"cover":null,"content":"<h2 id=\"一，安装\"><a href=\"#一，安装\" class=\"headerlink\" title=\"一，安装\"></a>一，安装</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -s vue-property-decorator vue-class-component</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"二，用法\"><a href=\"#二，用法\" class=\"headerlink\" title=\"二，用法\"></a><strong>二，用法</strong></h2><p><strong>1，@Component(options:ComponentOptions &#x3D; {})</strong></p>\n<p><code>@Component</code> 装饰器可以接收一个对象作为参数，可以在对象中声明 <code>components ，filters，directives</code>等未提供装饰器的选项，也可以声明<code>computed，watch</code>等</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">filters</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">toFixed</span>: <span class=\"function\">(<span class=\"params\">num: <span class=\"built_in\">number</span>, fix: <span class=\"built_in\">number</span> = <span class=\"number\">2</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> num.<span class=\"title function_\">toFixed</span>(fix)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"attr\">list</span>: <span class=\"built_in\">number</span>[] = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>]</span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title function_\">evenList</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">list</span>.<span class=\"title function_\">filter</span>(<span class=\"function\">(<span class=\"params\">item: <span class=\"built_in\">number</span></span>) =&gt;</span> item % <span class=\"number\">2</span> === <span class=\"number\">0</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>2，@Prop(options: (PropOptions | Constructor[] | Constructor) &#x3D; {})</strong></p>\n<p><code>@Prop</code>装饰器接收一个参数，这个参数可以有三种写法：</p>\n<ul>\n<li><code>Constructor</code>，例如<code>String，Number，Boolean</code>等，指定 <code>prop</code> 的类型；</li>\n<li><code>Constructor[]</code>，指定 <code>prop</code> 的可选类型；</li>\n<li><code>PropOptions</code>，可以使用以下选项：<code>type，default，required，validator</code>。</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span>, <span class=\"title class_\">Prop</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Prop</span>(<span class=\"title class_\">String</span>) <span class=\"keyword\">public</span> <span class=\"attr\">propA</span>: <span class=\"built_in\">string</span> | <span class=\"literal\">undefined</span></span><br><span class=\"line\">  <span class=\"meta\">@Prop</span>([<span class=\"title class_\">String</span>, <span class=\"title class_\">Number</span>]) <span class=\"keyword\">public</span> propB!: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span></span><br><span class=\"line\">  <span class=\"meta\">@Prop</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">    <span class=\"attr\">default</span>: <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">public</span> propC!: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等同于下面的<code>js</code>写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">propA</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">type</span>: <span class=\"title class_\">String</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">propB</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">type</span>: [<span class=\"title class_\">String</span>, <span class=\"title class_\">Number</span>]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">propC</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">      <span class=\"attr\">defalut</span>: <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>注意：</p>\n<ul>\n<li>属性的ts类型后面需要加上<code>undefined</code>类型；或者在属性名后面加上!，表示<code>非null</code> 和 <code>非undefined</code><br>的断言，否则编译器会给出错误提示；</li>\n<li>指定默认值必须使用上面例子中的写法，如果直接在属性名后面赋值，会重写这个属性，并且会报错。</li>\n</ul>\n<p><strong>3，@PropSync(propName: string, options: (PropOptions | Constructor[] | Constructor) &#x3D; {})</strong></p>\n<p><code>@PropSync</code>装饰器与<code>@prop</code>用法类似，二者的区别在于：</p>\n<ul>\n<li><code>@PropSync</code> 装饰器接收两个参数：<br><code>propName: string</code> 表示父组件传递过来的属性名；<br><code>options: Constructor | Constructor[] | PropOptions</code> 与<code>@Prop</code>的第一个参数一致；</li>\n<li><code>@PropSync</code> 会生成一个新的计算属性。</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span>, <span class=\"title class_\">PropSync</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@PropSync</span>(<span class=\"string\">&#x27;propA&#x27;</span>, &#123; <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>, <span class=\"attr\">default</span>: <span class=\"string\">&#x27;abc&#x27;</span> &#125;) <span class=\"keyword\">public</span> syncedPropA!: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等同于下面的<code>js</code>写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">propA</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">      <span class=\"attr\">default</span>: <span class=\"string\">&#x27;abc&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">syncedPropA</span>: &#123;</span><br><span class=\"line\">      <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">propA</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"title function_\">set</span>(<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;update:propA&#x27;</span>, value)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>注意：<code>@PropSync</code>需要配合父组件的<code>.sync</code>修饰符使用</strong></p>\n<p><strong>4，@Model(event?: string, options: (PropOptions | Constructor[] | Constructor) &#x3D; {})</strong></p>\n<p><code>@Model</code>装饰器允许我们在一个组件上自定义<code>v-model</code>，接收两个参数：</p>\n<ul>\n<li><code>event: string</code> 事件名。</li>\n<li><code>options: Constructor | Constructor[] | PropOptions</code> 与<code>@Prop</code>的第一个参数一致。</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span>, <span class=\"title class_\">Model</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyInput</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Model</span>(<span class=\"string\">&#x27;change&#x27;</span>, &#123; <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>, <span class=\"attr\">default</span>: <span class=\"string\">&#x27;123&#x27;</span> &#125;) <span class=\"keyword\">public</span> value!: <span class=\"built_in\">string</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等同于下面的<code>js</code>写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">model</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">prop</span>: <span class=\"string\">&#x27;value&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">event</span>: <span class=\"string\">&#x27;change&#x27;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">props</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">value</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">type</span>: <span class=\"title class_\">String</span>,</span><br><span class=\"line\">      <span class=\"attr\">default</span>: <span class=\"string\">&#x27;123&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面例子中指定的是<code>change</code>事件，所以我们还需要在<code>template</code>中加上相应的事件：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">input</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:value</span>=<span class=\"string\">&quot;value&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    @<span class=\"attr\">change</span>=<span class=\"string\">&quot;$emit(&#x27;change&#x27;, $event.target.value)&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">  /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><strong>对<code>自定义v-model</code>不太理解的同学，可以查看<a href=\"https://cn.vuejs.org/v2/guide/components-custom-events.html\">自定义事件</a></strong></p>\n<p><strong>5，@Watch(path: string, options: WatchOptions &#x3D; {})</strong></p>\n<p><code>@Watch</code> 装饰器接收两个参数：</p>\n<ul>\n<li><p><code>path: string</code> 被侦听的属性名；</p>\n<p>options可以包含两个属性 ：</p>\n<p><code>immediate?:boolean</code> 侦听开始之后是否立即调用该回调函数；<br><code>deep?:boolean</code> 被侦听的对象的属性被改变时，是否调用该回调函数；</p>\n</li>\n</ul>\n<p><strong>侦听开始，发生在<code>beforeCreate</code>勾子之后，<code>created</code>勾子之前</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span>, <span class=\"title class_\">Watch</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyInput</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Watch</span>(<span class=\"string\">&#x27;msg&#x27;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">onMsgChanged</span>(<span class=\"params\">newValue: <span class=\"built_in\">string</span>, oldValue: <span class=\"built_in\">string</span></span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Watch</span>(<span class=\"string\">&#x27;arr&#x27;</span>, &#123; <span class=\"attr\">immediate</span>: <span class=\"literal\">true</span>, <span class=\"attr\">deep</span>: <span class=\"literal\">true</span> &#125;)</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">onArrChanged1</span>(<span class=\"params\">newValue: <span class=\"built_in\">number</span>[], oldValue: <span class=\"built_in\">number</span>[]</span>) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Watch</span>(<span class=\"string\">&#x27;arr&#x27;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">onArrChanged2</span>(<span class=\"params\">newValue: <span class=\"built_in\">number</span>[], oldValue: <span class=\"built_in\">number</span>[]</span>) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等同于下面的<code>js</code>写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">watch</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">msg</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">handler</span>: <span class=\"string\">&#x27;onMsgChanged&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">immediate</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">deep</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">arr</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">handler</span>: <span class=\"string\">&#x27;onArrChanged1&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">immediate</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">deep</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">handler</span>: <span class=\"string\">&#x27;onArrChanged2&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">immediate</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"attr\">deep</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">methods</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">onMsgVhanged</span>(<span class=\"params\">newValue, oldValue</span>) &#123;&#125;,</span><br><span class=\"line\">    <span class=\"title function_\">onArrChange1</span>(<span class=\"params\">newValue, oldValue</span>) &#123;&#125;,</span><br><span class=\"line\">    <span class=\"title function_\">onArrChange2</span>(<span class=\"params\">newValue, oldValue</span>) &#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>6，@Emit(event?: string)</strong></p>\n<ul>\n<li><code>@Emit</code> 装饰器接收一个可选参数，该参数是<code>$Emit</code>的第一个参数，充当事件名。如果没有提供这个参数，<code>$Emit</code>会将回调函数名的<code>camelCase</code>转为<code>kebab-case</code>，并将其作为事件名；</li>\n<li><code>@Emit</code>会将回调函数的返回值作为第二个参数，如果返回值是一个<code>Promise</code>对象，<code>$emit</code>会在<code>Promise</code>对象被标记为<code>resolved</code>之后触发；</li>\n<li><code>@Emit</code>的回调函数的参数，会放在其返回值之后，一起被<code>$emit</code>当做参数使用。</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span>, <span class=\"title class_\">Emit</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  count = <span class=\"number\">0</span></span><br><span class=\"line\">  <span class=\"meta\">@Emit</span>()</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">addToCount</span>(<span class=\"params\">n: <span class=\"built_in\">number</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">count</span> += n</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"meta\">@Emit</span>(<span class=\"string\">&#x27;reset&#x27;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">resetCount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">count</span> = <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"meta\">@Emit</span>()</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">returnValue</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">10</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"meta\">@Emit</span>()</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">onInputChange</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> e.<span class=\"property\">target</span>.<span class=\"property\">value</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"meta\">@Emit</span>()</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">promise</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"title function_\">resolve</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">      &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等同于下面的<code>js</code>写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">data</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">count</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">methods</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">addToCount</span>(<span class=\"params\">n</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">count</span> += n</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;add-to-count&#x27;</span>, n)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">resetCount</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">count</span> = <span class=\"number\">0</span></span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;reset&#x27;</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">returnValue</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;return-value&#x27;</span>, <span class=\"number\">10</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">onInputChange</span>(<span class=\"params\">e</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;on-input-change&#x27;</span>, e.<span class=\"property\">target</span>.<span class=\"property\">value</span>, e)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">promise</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> promise = <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"title function_\">resolve</span>(<span class=\"number\">20</span>)</span><br><span class=\"line\">        &#125;, <span class=\"number\">0</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      promise.<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">value</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.$emit(<span class=\"string\">&#x27;promise&#x27;</span>, value)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>7，@Ref(refKey?: string)</strong></p>\n<p><code>@Ref</code> 装饰器接收一个可选参数，用来指向元素或子组件的引用信息。如果没有提供这个参数，会使用装饰器后面的属性名充当参数</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Vue</span>, <span class=\"title class_\">Component</span>, <span class=\"title class_\">Ref</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-property-decorator&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Form</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;element-ui&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Componentexport</span> <span class=\"keyword\">default</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title class_ inherited__\">Vue</span> &#123;</span><br><span class=\"line\">  <span class=\"meta\">@Ref</span>() <span class=\"keyword\">readonly</span> loginForm!: <span class=\"title class_\">Form</span></span><br><span class=\"line\">  <span class=\"meta\">@Ref</span>(<span class=\"string\">&#x27;changePasswordForm&#x27;</span>) <span class=\"keyword\">readonly</span> passwordForm!: <span class=\"title class_\">Form</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"title function_\">handleLogin</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">loginForm</span>.<span class=\"title function_\">validate</span>(<span class=\"function\"><span class=\"params\">valide</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (valide) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// login...</span></span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// error tips</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等同于下面的<code>js</code>写法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">loginForm</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">cache</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>.<span class=\"property\">loginForm</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">passwordForm</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">cache</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"title function_\">get</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>.<span class=\"property\">changePasswordForm</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>@Provide&#x2F;@Inject 和 @ProvideReactive&#x2F;@InhectReactive</strong></p>\n<p>由于平时基本不用到provide&#x2F;inject选项，暂时先放着，以后有时间再研究</p>\n<p>参考：<a href=\"https://github.com/kaorun343/vue-property-decorator\">https://github.com/kaorun343/...</a></p>\n","text":"一，安装1npm i -s vue-property-decorator vue-class-component 二，用法1，@Component(option...","permalink":"/post/vue/vue-property-decorator使用手册","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[],"tags":[{"name":"vue","slug":"vue","count":7,"path":"api/tags/vue.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%EF%BC%8C%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">一，安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%EF%BC%8C%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">二，用法</span></a></li></ol>","author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"6. 打包、发布、升级","uid":"4363a1c8f18b34e52ca1d5e6f6bd7690","slug":"vscode插件开发/6. 打包、发布、升级","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.993Z","comments":true,"path":"api/articles/vscode插件开发/6. 打包、发布、升级.json","keywords":null,"cover":[],"text":"发布方式插件开发完了，如何发布出去分享给他人呢？主要有3种方法： 方法一：直接把文件夹发给别人，让别人找到vscode的插件存放目录并放进去，然后重启vscod...","permalink":"/post/vscode插件开发/6. 打包、发布、升级","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"vscode插件开发","slug":"vscode插件开发","count":7,"path":"api/tags/vscode插件开发.json"}],"author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"7. 常用API总结","uid":"7485ac3dd1b5518a73477d38ad77532d","slug":"vscode插件开发/7. 常用API总结","date":"2024-05-05T06:52:32.000Z","updated":"2024-05-05T06:52:33.993Z","comments":true,"path":"api/articles/vscode插件开发/7. 常用API总结.json","keywords":null,"cover":[],"text":"编辑器相关1.1. 修改当前激活编辑器内容替换当前编辑器全部内容： 123456vscode.window.activeTextEditor.edit(edit...","permalink":"/post/vscode插件开发/7. 常用API总结","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"vscode插件开发","slug":"vscode插件开发","count":7,"path":"api/tags/vscode插件开发.json"}],"author":{"name":"MessageWall","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fsafe-img.xhscdn.com%2Fbw1%2F0bcda423-149d-411d-a505-d29abc1ab6de%3FimageView2%2F2%2Fw%2F1080%2Fformat%2Fjpg&refer=http%3A%2F%2Fsafe-img.xhscdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1717404600&t=829a21da2f1f1a8181b572805d48b476","link":"/","description":"欢迎来到小王的博客～ <br/> 博客不定时更新，欢迎收藏","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}